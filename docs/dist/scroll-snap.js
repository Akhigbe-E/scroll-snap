!function(Q,F){"object"==typeof exports&&"object"==typeof module?module.exports=F():"function"==typeof define&&define.amd?define([],F):"object"==typeof exports?exports["scroll-snap"]=F():Q["scroll-snap"]=F()}(window,(function(){return function(Q){var F={};function B(U){if(F[U])return F[U].exports;var n=F[U]={i:U,l:!1,exports:{}};return Q[U].call(n.exports,n,n.exports,B),n.l=!0,n.exports}return B.m=Q,B.c=F,B.d=function(Q,F,U){B.o(Q,F)||Object.defineProperty(Q,F,{enumerable:!0,get:U})},B.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},B.t=function(Q,F){if(1&F&&(Q=B(Q)),8&F)return Q;if(4&F&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var U=Object.create(null);if(B.r(U),Object.defineProperty(U,"default",{enumerable:!0,value:Q}),2&F&&"string"!=typeof Q)for(var n in Q)B.d(U,n,function(F){return Q[F]}.bind(null,n));return U},B.n=function(Q){var F=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return B.d(F,"a",F),F},B.o=function(Q,F){return Object.prototype.hasOwnProperty.call(Q,F)},B.p="",B(B.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar index_1 = __importDefault(__webpack_require__(1));\nfunction callback() {\n    console.log('snap');\n}\nvar baseConfig = {\n    timeout: 100,\n    duration: 300,\n    threshold: 0.2,\n    easing: function (t) { return (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t); },\n};\nvar containerVertical = document.getElementById('container');\nvar snapVertical = new index_1.default(containerVertical, __assign({ snapDestinationY: '90%' }, baseConfig)).bind(callback);\nvar containerHorizontal = document.getElementById('container-horizontal');\nvar snapHorizontal = new index_1.default(containerHorizontal, __assign({ snapDestinationX: '100%' }, baseConfig)).bind(callback);\nwindow.unbind = function () {\n    snapVertical.unbind();\n    snapHorizontal.unbind();\n};\nwindow.bind = function () {\n    snapVertical.bind(callback);\n    snapHorizontal.bind(callback);\n};\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY3JvbGwtc25hcC8uL2RvY3Mvc3JjL2luZGV4LnRzPzEwZWQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHNEQUF3QztBQUV4QyxTQUFTLFFBQVE7SUFDZixPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQztBQUNyQixDQUFDO0FBRUQsSUFBTSxVQUFVLEdBQUc7SUFDakIsT0FBTyxFQUFFLEdBQUc7SUFDWixRQUFRLEVBQUUsR0FBRztJQUNiLFNBQVMsRUFBRSxHQUFHO0lBQ2QsTUFBTSxFQUFFLFVBQUMsQ0FBUyxJQUFLLFFBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBNUMsQ0FBNEM7Q0FDcEU7QUFFRCxJQUFNLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDO0FBQzlELElBQU0sWUFBWSxHQUFHLElBQUksZUFBVSxDQUFDLGlCQUFpQixhQUNuRCxnQkFBZ0IsRUFBRSxLQUFLLElBQ3BCLFVBQVUsRUFDYixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7QUFFakIsSUFBTSxtQkFBbUIsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLHNCQUFzQixDQUFDO0FBQzNFLElBQU0sY0FBYyxHQUFHLElBQUksZUFBVSxDQUFDLG1CQUFtQixhQUN2RCxnQkFBZ0IsRUFBRSxNQUFNLElBQ3JCLFVBQVUsRUFDYixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FFaEI7QUFBQyxNQUFjLENBQUMsTUFBTSxHQUFHO0lBQ3hCLFlBQVksQ0FBQyxNQUFNLEVBQUU7SUFDckIsY0FBYyxDQUFDLE1BQU0sRUFBRTtBQUN6QixDQUFDLENBQ0E7QUFBQyxNQUFjLENBQUMsSUFBSSxHQUFHO0lBQ3RCLFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQzNCLGNBQWMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO0FBQy9CLENBQUMiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTY3JvbGxTbmFwIGZyb20gJy4uLy4uL3NyYy9pbmRleCdcblxuZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gIGNvbnNvbGUubG9nKCdzbmFwJylcbn1cblxuY29uc3QgYmFzZUNvbmZpZyA9IHtcbiAgdGltZW91dDogMTAwLFxuICBkdXJhdGlvbjogMzAwLFxuICB0aHJlc2hvbGQ6IDAuMixcbiAgZWFzaW5nOiAodDogbnVtYmVyKSA9PiAodCA8IDAuNSA/IDIgKiB0ICogdCA6IC0xICsgKDQgLSAyICogdCkgKiB0KSxcbn1cblxuY29uc3QgY29udGFpbmVyVmVydGljYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyJylcbmNvbnN0IHNuYXBWZXJ0aWNhbCA9IG5ldyBTY3JvbGxTbmFwKGNvbnRhaW5lclZlcnRpY2FsLCB7XG4gIHNuYXBEZXN0aW5hdGlvblk6ICc5MCUnLFxuICAuLi5iYXNlQ29uZmlnLFxufSkuYmluZChjYWxsYmFjaylcblxuY29uc3QgY29udGFpbmVySG9yaXpvbnRhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXItaG9yaXpvbnRhbCcpXG5jb25zdCBzbmFwSG9yaXpvbnRhbCA9IG5ldyBTY3JvbGxTbmFwKGNvbnRhaW5lckhvcml6b250YWwsIHtcbiAgc25hcERlc3RpbmF0aW9uWDogJzEwMCUnLFxuICAuLi5iYXNlQ29uZmlnLFxufSkuYmluZChjYWxsYmFjaylcblxuOyh3aW5kb3cgYXMgYW55KS51bmJpbmQgPSAoKSA9PiB7XG4gIHNuYXBWZXJ0aWNhbC51bmJpbmQoKVxuICBzbmFwSG9yaXpvbnRhbC51bmJpbmQoKVxufVxuOyh3aW5kb3cgYXMgYW55KS5iaW5kID0gKCkgPT4ge1xuICBzbmFwVmVydGljYWwuYmluZChjYWxsYmFjaylcbiAgc25hcEhvcml6b250YWwuYmluZChjYWxsYmFjaylcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")},function(module,exports,__webpack_require__){"use strict";eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction easeInOutQuad(t) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n}\nvar TIMEOUT_MIN = 50;\nvar TIMEOUT_DEFAULT = 100;\nvar DURATION_DEFAULT = 300;\nvar THRESHOLD_DEFAULT = 0.2;\nvar SNAPSTOP_DEFAULT = false;\nvar EASING_DEFAULT = easeInOutQuad;\nvar NOOP = function () { };\nvar ScrollSnap = /** @class */ (function () {\n    function ScrollSnap(element, config) {\n        var _this = this;\n        this.animating = false;\n        this.lastScrollValue = {\n            x: 0,\n            y: 0,\n        };\n        this.startAnimation = function () {\n            _this.speedDeltaX = _this.checkScrollSpeed(_this.target.scrollLeft, 'x');\n            _this.speedDeltaY = _this.checkScrollSpeed(_this.target.scrollTop, 'y');\n            if (_this.animating || (_this.speedDeltaX === 0 && _this.speedDeltaY === 0)) {\n                return;\n            }\n            _this.handler(_this.target);\n        };\n        this.animationHandler = function () {\n            // if we don't move a thing, we can ignore the timeout: if we did, there'd be another timeout added for this.scrollStart+1.\n            if (_this.scrollStart.y === _this.target.scrollTop &&\n                _this.scrollStart.x === _this.target.scrollLeft) {\n                // ignore timeout\n                return;\n            }\n            // detect direction of scroll. negative is up, positive is down.\n            var direction = {\n                y: Math.sign(_this.speedDeltaY),\n                x: Math.sign(_this.speedDeltaX),\n            };\n            // get the next snap-point to snap-to\n            var snapPoint = _this.getNextSnapPoint(_this.target, direction);\n            _this.listenerElement.removeEventListener('scroll', _this.startAnimation, false);\n            _this.animating = true;\n            // smoothly move to the snap point\n            _this.smoothScroll(_this.target, snapPoint, function () {\n                // after moving to the snap point, rebind the scroll event handler\n                _this.animating = false;\n                _this.listenerElement.addEventListener('scroll', _this.startAnimation, false);\n                _this.onAnimationEnd();\n                // reset scrollStart\n                _this.scrollStart = {\n                    y: _this.target.scrollTop,\n                    x: _this.target.scrollLeft,\n                };\n            });\n        };\n        this.element = element;\n        var snapDestinationX = config.snapDestinationX, snapDestinationY = config.snapDestinationY, timeout = config.timeout, duration = config.duration, threshold = config.threshold, snapStop = config.snapStop, easing = config.easing;\n        if (snapDestinationX &&\n            typeof snapDestinationX !== 'string' &&\n            typeof snapDestinationX !== 'number') {\n            throw new Error(\"Config property 'snapDestinationX' is not valid, expected STRING or NUMBER but found \" + (typeof snapDestinationX).toUpperCase());\n        }\n        this.snapDestinationX = snapDestinationX;\n        if (snapDestinationY &&\n            typeof snapDestinationY !== 'string' &&\n            typeof snapDestinationY !== 'number') {\n            throw new Error(\"Config property 'snapDestinationY' is not valid, expected STRING or NUMBER but found \" + (typeof snapDestinationY).toUpperCase());\n        }\n        this.snapDestinationY = snapDestinationY;\n        if (timeout && (isNaN(timeout) || typeof timeout === 'boolean')) {\n            throw new Error(\"Optional config property 'timeout' is not valid, expected NUMBER but found \" + (typeof timeout).toUpperCase());\n        }\n        // any value less then TIMEOUT_MIN may cause weird bahaviour on some devices (especially on mobile with momentum scrolling)\n        this.timeout = timeout && timeout >= TIMEOUT_MIN ? timeout : TIMEOUT_DEFAULT;\n        if (duration && (isNaN(duration) || typeof duration === 'boolean')) {\n            throw new Error(\"Optional config property 'duration' is not valid, expected NUMBER but found \" + (typeof duration).toUpperCase());\n        }\n        this.duration = duration || DURATION_DEFAULT;\n        if (threshold && (isNaN(threshold) || typeof threshold === 'boolean')) {\n            throw new Error(\"Optional config property 'threshold' is not valid, expected NUMBER but found \" + (typeof threshold).toUpperCase());\n        }\n        this.threshold = threshold || THRESHOLD_DEFAULT;\n        if (easing && typeof easing !== 'function') {\n            throw new Error(\"Optional config property 'easing' is not valid, expected FUNCTION but found \" + (typeof easing).toUpperCase());\n        }\n        this.easing = easing || EASING_DEFAULT;\n        if (snapStop && typeof snapStop !== 'boolean') {\n            throw new Error(\"Optional config property 'snapStop' is not valid, expected BOOLEAN but found \" + (typeof snapStop).toUpperCase());\n        }\n        this.snapStop = snapStop || SNAPSTOP_DEFAULT;\n    }\n    ScrollSnap.prototype.checkScrollSpeed = function (value, axis) {\n        var _this = this;\n        var clear = function () {\n            _this.lastScrollValue[axis] = null;\n        };\n        var newValue = value;\n        var delta;\n        if (this.lastScrollValue[axis] !== null) {\n            delta = newValue - this.lastScrollValue[axis];\n        }\n        else {\n            delta = 0;\n        }\n        this.lastScrollValue[axis] = newValue;\n        this.scrollSpeedTimer && clearTimeout(this.scrollSpeedTimer);\n        this.scrollSpeedTimer = window.setTimeout(clear, 100);\n        return delta;\n    };\n    ScrollSnap.prototype.saveDeclaration = function (obj) {\n        this.snapLengthUnit = this.parseSnapCoordValue(this.snapDestinationX, this.snapDestinationY);\n    };\n    ScrollSnap.prototype.bindElement = function (element) {\n        this.target = element;\n        this.listenerElement = element === document.documentElement ? window : element;\n        this.listenerElement.addEventListener('scroll', this.startAnimation, false);\n        this.saveDeclaration(this.target);\n    };\n    ScrollSnap.prototype.unbindElement = function () {\n        this.listenerElement.removeEventListener('scroll', this.startAnimation, false);\n    };\n    /**\n     * scroll handler\n     * this is the callback for scroll events.\n     */\n    ScrollSnap.prototype.handler = function (target) {\n        // if currently animating, stop it. this prevents flickering.\n        if (this.animationFrame) {\n            clearTimeout(this.animationFrame);\n        }\n        // if a previous timeout exists, clear it.\n        if (this.scrollHandlerTimer) {\n            // we only want to call a timeout once after scrolling..\n            clearTimeout(this.scrollHandlerTimer);\n        }\n        else {\n            this.scrollStart = {\n                y: target.scrollTop,\n                x: target.scrollLeft,\n            };\n        }\n        this.scrollHandlerTimer = window.setTimeout(this.animationHandler, this.timeout);\n    };\n    ScrollSnap.prototype.getNextSnapPoint = function (target, direction) {\n        // get snap length\n        var snapLength = {\n            y: Math.round(this.getYSnapLength(this.target, this.snapLengthUnit.y)),\n            x: Math.round(this.getXSnapLength(this.target, this.snapLengthUnit.x)),\n        };\n        var top = this.target.scrollTop;\n        var left = this.target.scrollLeft;\n        var startPoint = {\n            y: this.scrollStart.y / snapLength.y || 0,\n            x: this.scrollStart.x / snapLength.x || 0,\n        };\n        var currentPoint = {\n            y: top / snapLength.y || 0,\n            x: left / snapLength.x || 0,\n        };\n        var nextPoint = {\n            y: 0,\n            x: 0,\n        };\n        /**\n         * Set target and bounds by direction,\n         * if threshold has not been reached, scroll back to currentPoint\n         **/\n        if (this.isAboveThreshold(direction.y, currentPoint.y)) {\n            if (this.snapStop) {\n                nextPoint.y = this.roundByDirection(-direction.y, startPoint.y + direction.y);\n            }\n            else {\n                nextPoint.y = this.roundByDirection(direction.y, currentPoint.y);\n            }\n        }\n        else {\n            nextPoint.y = this.roundByDirection(direction.y * -1, currentPoint.y);\n        }\n        if (this.isAboveThreshold(direction.x, currentPoint.x)) {\n            if (this.snapStop) {\n                nextPoint.x = this.roundByDirection(-direction.x, startPoint.x + direction.x);\n            }\n            else {\n                nextPoint.x = this.roundByDirection(direction.x, currentPoint.x);\n            }\n        }\n        else {\n            nextPoint.x = this.roundByDirection(direction.x * -1, currentPoint.x);\n        }\n        // DEBUG\n        // console.log('direction', direction)\n        // console.log('startPoint', startPoint)\n        // console.log('currentPoint', currentPoint)\n        // console.log('nextPoint', nextPoint)\n        // calculate where to scroll\n        var scrollTo = {\n            y: nextPoint.y * snapLength.y,\n            x: nextPoint.x * snapLength.x,\n        };\n        // stay in bounds (minimum: 0, maxmimum: absolute height)\n        scrollTo.y = this.stayInBounds(0, target.scrollHeight, scrollTo.y);\n        scrollTo.x = this.stayInBounds(0, target.scrollWidth, scrollTo.x);\n        return scrollTo;\n    };\n    ScrollSnap.prototype.isAboveThreshold = function (direction, value) {\n        return direction > 0 ? value % 1 > this.threshold : 1 - (value % 1) > this.threshold;\n    };\n    ScrollSnap.prototype.roundByDirection = function (direction, value) {\n        if (direction === -1) {\n            // when we go up, we floor the number to jump to the next snap-point in scroll direction\n            return Math.floor(value);\n        }\n        // go down, we ceil the number to jump to the next in view.\n        return Math.ceil(value);\n    };\n    ScrollSnap.prototype.stayInBounds = function (min, max, destined) {\n        return Math.max(Math.min(destined, max), min);\n    };\n    ScrollSnap.prototype.parseSnapCoordValue = function (x, y) {\n        // regex to parse lengths\n        var regex = /([+-]?(?=\\.\\d|\\d)(?:\\d+)?(?:\\.?\\d*)(?:[eE][+-]?\\d+)?)(px|%|vw|vh)/;\n        // defaults\n        var parsed = {\n            y: {\n                value: 0,\n                unit: 'px',\n            },\n            x: {\n                value: 0,\n                unit: 'px',\n            },\n        };\n        if (typeof y === 'number') {\n            parsed.y.value = y;\n        }\n        else {\n            var resultY = regex.exec(y);\n            if (resultY !== null) {\n                parsed.y = {\n                    value: Number(resultY[1]),\n                    unit: resultY[2],\n                };\n            }\n        }\n        if (typeof x === 'number') {\n            parsed.x.value = x;\n        }\n        else {\n            var resultX = regex.exec(x);\n            if (resultX !== null) {\n                parsed.x = {\n                    value: Number(resultX[1]),\n                    unit: resultX[2],\n                };\n            }\n        }\n        return parsed;\n    };\n    ScrollSnap.prototype.getYSnapLength = function (obj, declaration) {\n        // get y snap length based on declaration unit\n        if (declaration.unit === 'vh') {\n            return ((Math.max(document.documentElement.clientHeight, window.innerHeight || 1) / 100) *\n                declaration.value);\n        }\n        else if (declaration.unit === '%') {\n            return (obj.clientHeight / 100) * declaration.value;\n        }\n        else {\n            return declaration.value;\n        }\n    };\n    ScrollSnap.prototype.getXSnapLength = function (obj, declaration) {\n        // get x snap length based on declaration unit\n        if (declaration.unit === 'vw') {\n            return ((Math.max(document.documentElement.clientWidth, window.innerWidth || 1) / 100) *\n                declaration.value);\n        }\n        else if (declaration.unit === '%') {\n            return (obj.clientWidth / 100) * declaration.value;\n        }\n        else {\n            return declaration.value;\n        }\n    };\n    ScrollSnap.prototype.isEdge = function (coords) {\n        return (coords.x === 0 && this.speedDeltaY === 0) || (coords.y === 0 && this.speedDeltaX === 0);\n    };\n    ScrollSnap.prototype.smoothScroll = function (obj, end, callback) {\n        var _this = this;\n        var position = function (start, end, elapsed, duration) {\n            if (elapsed > duration) {\n                return end;\n            }\n            return start + (end - start) * _this.easing(elapsed / duration);\n        };\n        var start = {\n            y: obj.scrollTop,\n            x: obj.scrollLeft,\n        };\n        // get animation frame or a fallback\n        var requestAnimationFrame = window.requestAnimationFrame ||\n            window.webkitRequestAnimationFrame ||\n            function (fn) {\n                return window.setTimeout(fn, 15);\n            };\n        var duration = this.isEdge(start) ? 0 : this.duration;\n        var startTime;\n        // setup the stepping function\n        function step(timestamp) {\n            if (!startTime) {\n                startTime = timestamp;\n            }\n            var elapsed = timestamp - startTime;\n            // change position on y-axis if result is a number.\n            if (!isNaN(end.y)) {\n                obj.scrollTop = position(start.y, end.y, elapsed, duration);\n            }\n            // change position on x-axis if result is a number.\n            if (!isNaN(end.x)) {\n                obj.scrollLeft = position(start.x, end.x, elapsed, duration);\n            }\n            // check if we are over due;\n            if (elapsed < duration) {\n                requestAnimationFrame(step);\n            }\n            else {\n                // is there a callback?\n                if (typeof callback === 'function') {\n                    // stop execution and run the callback\n                    return callback(end);\n                }\n            }\n        }\n        this.animationFrame = requestAnimationFrame(step);\n    };\n    ScrollSnap.prototype.bind = function (callback) {\n        this.onAnimationEnd = typeof callback === 'function' ? callback : NOOP;\n        this.bindElement(this.element);\n        return this;\n    };\n    ScrollSnap.prototype.unbind = function () {\n        this.unbindElement();\n        return this;\n    };\n    return ScrollSnap;\n}());\nexports.default = ScrollSnap;\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY3JvbGwtc25hcC8uL3NyYy9pbmRleC50cz9mZmI0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsU0FBUyxhQUFhLENBQUMsQ0FBUztJQUM5QixPQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUNuRCxDQUFDO0FBRUQsSUFBTSxXQUFXLEdBQUcsRUFBRTtBQUN0QixJQUFNLGVBQWUsR0FBRyxHQUFHO0FBQzNCLElBQU0sZ0JBQWdCLEdBQUcsR0FBRztBQUM1QixJQUFNLGlCQUFpQixHQUFHLEdBQUc7QUFDN0IsSUFBTSxnQkFBZ0IsR0FBRyxLQUFLO0FBQzlCLElBQU0sY0FBYyxHQUFHLGFBQWE7QUFDcEMsSUFBTSxJQUFJLEdBQUcsY0FBTyxDQUFDO0FBK0NyQjtJQTJCRSxvQkFBWSxPQUFvQixFQUFFLE1BQStCO1FBQWpFLGlCQXFFQztRQXBGRCxjQUFTLEdBQUcsS0FBSztRQVNULG9CQUFlLEdBQVc7WUFDaEMsQ0FBQyxFQUFFLENBQUM7WUFDSixDQUFDLEVBQUUsQ0FBQztTQUNMO1FBK0dPLG1CQUFjLEdBQUc7WUFDdkIsS0FBSSxDQUFDLFdBQVcsR0FBRyxLQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDO1lBQ3JFLEtBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQztZQUVwRSxJQUFJLEtBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxLQUFJLENBQUMsV0FBVyxLQUFLLENBQUMsSUFBSSxLQUFJLENBQUMsV0FBVyxLQUFLLENBQUMsQ0FBQyxFQUFFO2dCQUN4RSxPQUFNO2FBQ1A7WUFFRCxLQUFJLENBQUMsT0FBTyxDQUFDLEtBQUksQ0FBQyxNQUFNLENBQUM7UUFDM0IsQ0FBQztRQTBCTyxxQkFBZ0IsR0FBRztZQUN6QiwySEFBMkg7WUFDM0gsSUFDRSxLQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsS0FBSyxLQUFJLENBQUMsTUFBTSxDQUFDLFNBQVM7Z0JBQzVDLEtBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFLLEtBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUM3QztnQkFDQSxpQkFBaUI7Z0JBQ2pCLE9BQU07YUFDUDtZQUVELGdFQUFnRTtZQUNoRSxJQUFNLFNBQVMsR0FBRztnQkFDaEIsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSSxDQUFDLFdBQVcsQ0FBQztnQkFDOUIsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSSxDQUFDLFdBQVcsQ0FBQzthQUMvQjtZQUVELHFDQUFxQztZQUNyQyxJQUFNLFNBQVMsR0FBRyxLQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUM7WUFFL0QsS0FBSSxDQUFDLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLEVBQUUsS0FBSSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUM7WUFFOUUsS0FBSSxDQUFDLFNBQVMsR0FBRyxJQUFJO1lBRXJCLGtDQUFrQztZQUNsQyxLQUFJLENBQUMsWUFBWSxDQUFDLEtBQUksQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFO2dCQUN4QyxrRUFBa0U7Z0JBQ2xFLEtBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSztnQkFDdEIsS0FBSSxDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsS0FBSSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUM7Z0JBQzNFLEtBQUksQ0FBQyxjQUFjLEVBQUU7Z0JBRXJCLG9CQUFvQjtnQkFDcEIsS0FBSSxDQUFDLFdBQVcsR0FBRztvQkFDakIsQ0FBQyxFQUFFLEtBQUksQ0FBQyxNQUFNLENBQUMsU0FBUztvQkFDeEIsQ0FBQyxFQUFFLEtBQUksQ0FBQyxNQUFNLENBQUMsVUFBVTtpQkFDMUI7WUFDSCxDQUFDLENBQUM7UUFDSixDQUFDO1FBbExDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTztRQUVwQiw4Q0FBZ0IsRUFDaEIsMENBQWdCLEVBQ2hCLHdCQUFPLEVBQ1AsMEJBQVEsRUFDUiw0QkFBUyxFQUNULDBCQUFRLEVBQ1Isc0JBQU0sQ0FDRTtRQUVWLElBQ0UsZ0JBQWdCO1lBQ2hCLE9BQU8sZ0JBQWdCLEtBQUssUUFBUTtZQUNwQyxPQUFPLGdCQUFnQixLQUFLLFFBQVEsRUFDcEM7WUFDQSxNQUFNLElBQUksS0FBSyxDQUNiLDBGQUF3RixDQUFDLE9BQU8sZ0JBQWdCLENBQUMsQ0FBQyxXQUFXLEVBQUksQ0FDbEk7U0FDRjtRQUNELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0I7UUFFeEMsSUFDRSxnQkFBZ0I7WUFDaEIsT0FBTyxnQkFBZ0IsS0FBSyxRQUFRO1lBQ3BDLE9BQU8sZ0JBQWdCLEtBQUssUUFBUSxFQUNwQztZQUNBLE1BQU0sSUFBSSxLQUFLLENBQ2IsMEZBQXdGLENBQUMsT0FBTyxnQkFBZ0IsQ0FBQyxDQUFDLFdBQVcsRUFBSSxDQUNsSTtTQUNGO1FBQ0QsSUFBSSxDQUFDLGdCQUFnQixHQUFHLGdCQUFnQjtRQUV4QyxJQUFJLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxPQUFPLE9BQU8sS0FBSyxTQUFTLENBQUMsRUFBRTtZQUMvRCxNQUFNLElBQUksS0FBSyxDQUNiLGdGQUE4RSxDQUFDLE9BQU8sT0FBTyxDQUFDLENBQUMsV0FBVyxFQUFJLENBQy9HO1NBQ0Y7UUFDRCwySEFBMkg7UUFDM0gsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLElBQUksT0FBTyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxlQUFlO1FBRTVFLElBQUksUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLE9BQU8sUUFBUSxLQUFLLFNBQVMsQ0FBQyxFQUFFO1lBQ2xFLE1BQU0sSUFBSSxLQUFLLENBQ2IsaUZBQStFLENBQUMsT0FBTyxRQUFRLENBQUMsQ0FBQyxXQUFXLEVBQUksQ0FDakg7U0FDRjtRQUNELElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxJQUFJLGdCQUFnQjtRQUU1QyxJQUFJLFNBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxPQUFPLFNBQVMsS0FBSyxTQUFTLENBQUMsRUFBRTtZQUNyRSxNQUFNLElBQUksS0FBSyxDQUNiLGtGQUFnRixDQUFDLE9BQU8sU0FBUyxDQUFDLENBQUMsV0FBVyxFQUFJLENBQ25IO1NBQ0Y7UUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsSUFBSSxpQkFBaUI7UUFFL0MsSUFBSSxNQUFNLElBQUksT0FBTyxNQUFNLEtBQUssVUFBVSxFQUFFO1lBQzFDLE1BQU0sSUFBSSxLQUFLLENBQ2IsaUZBQStFLENBQUMsT0FBTyxNQUFNLENBQUMsQ0FBQyxXQUFXLEVBQUksQ0FDL0c7U0FDRjtRQUNELElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxJQUFJLGNBQWM7UUFFdEMsSUFBSSxRQUFRLElBQUksT0FBTyxRQUFRLEtBQUssU0FBUyxFQUFFO1lBQzdDLE1BQU0sSUFBSSxLQUFLLENBQ2Isa0ZBQWdGLENBQUMsT0FBTyxRQUFRLENBQUMsQ0FBQyxXQUFXLEVBQUksQ0FDbEg7U0FDRjtRQUNELElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxJQUFJLGdCQUFnQjtJQUM5QyxDQUFDO0lBRU8scUNBQWdCLEdBQXhCLFVBQXlCLEtBQWEsRUFBRSxJQUFlO1FBQXZELGlCQW1CQztRQWxCQyxJQUFNLEtBQUssR0FBRztZQUNaLEtBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSTtRQUNuQyxDQUFDO1FBRUQsSUFBTSxRQUFRLEdBQUcsS0FBSztRQUN0QixJQUFJLEtBQUs7UUFFVCxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxFQUFFO1lBQ3ZDLEtBQUssR0FBRyxRQUFRLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUM7U0FDOUM7YUFBTTtZQUNMLEtBQUssR0FBRyxDQUFDO1NBQ1Y7UUFFRCxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxHQUFHLFFBQVE7UUFDckMsSUFBSSxDQUFDLGdCQUFnQixJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7UUFDNUQsSUFBSSxDQUFDLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQztRQUVyRCxPQUFPLEtBQUs7SUFDZCxDQUFDO0lBRU8sb0NBQWUsR0FBdkIsVUFBd0IsR0FBZ0I7UUFDdEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztJQUM5RixDQUFDO0lBRU8sZ0NBQVcsR0FBbkIsVUFBb0IsT0FBb0I7UUFDdEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPO1FBQ3JCLElBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxLQUFLLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTztRQUU5RSxJQUFJLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLEtBQUssQ0FBQztRQUMzRSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDbkMsQ0FBQztJQUVPLGtDQUFhLEdBQXJCO1FBQ0UsSUFBSSxDQUFDLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUM7SUFDaEYsQ0FBQztJQWFEOzs7T0FHRztJQUNLLDRCQUFPLEdBQWYsVUFBZ0IsTUFBbUI7UUFDakMsNkRBQTZEO1FBQzdELElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUN2QixZQUFZLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQztTQUNsQztRQUVELDBDQUEwQztRQUMxQyxJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtZQUMzQix3REFBd0Q7WUFDeEQsWUFBWSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztTQUN0QzthQUFNO1lBQ0wsSUFBSSxDQUFDLFdBQVcsR0FBRztnQkFDakIsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxTQUFTO2dCQUNuQixDQUFDLEVBQUUsTUFBTSxDQUFDLFVBQVU7YUFDckI7U0FDRjtRQUVELElBQUksQ0FBQyxrQkFBa0IsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ2xGLENBQUM7SUF3Q08scUNBQWdCLEdBQXhCLFVBQXlCLE1BQW1CLEVBQUUsU0FBaUI7UUFDN0Qsa0JBQWtCO1FBQ2xCLElBQU0sVUFBVSxHQUFHO1lBQ2pCLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RFLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3ZFO1FBQ0QsSUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTO1FBQ2pDLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVTtRQUVuQyxJQUFNLFVBQVUsR0FBRztZQUNqQixDQUFDLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ3pDLENBQUMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUM7U0FDMUM7UUFDRCxJQUFNLFlBQVksR0FBRztZQUNuQixDQUFDLEVBQUUsR0FBRyxHQUFHLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUMxQixDQUFDLEVBQUUsSUFBSSxHQUFHLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQztTQUM1QjtRQUNELElBQU0sU0FBUyxHQUFHO1lBQ2hCLENBQUMsRUFBRSxDQUFDO1lBQ0osQ0FBQyxFQUFFLENBQUM7U0FDTDtRQUVEOzs7WUFHSTtRQUNKLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ3RELElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDakIsU0FBUyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQzthQUM5RTtpQkFBTTtnQkFDTCxTQUFTLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUM7YUFDakU7U0FDRjthQUFNO1lBQ0wsU0FBUyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDO1NBQ3RFO1FBRUQsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDdEQsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUNqQixTQUFTLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDO2FBQzlFO2lCQUFNO2dCQUNMLFNBQVMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQzthQUNqRTtTQUNGO2FBQU07WUFDTCxTQUFTLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUM7U0FDdEU7UUFFRCxRQUFRO1FBQ1Isc0NBQXNDO1FBQ3RDLHdDQUF3QztRQUN4Qyw0Q0FBNEM7UUFDNUMsc0NBQXNDO1FBRXRDLDRCQUE0QjtRQUM1QixJQUFNLFFBQVEsR0FBRztZQUNmLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDO1lBQzdCLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDO1NBQzlCO1FBRUQseURBQXlEO1FBQ3pELFFBQVEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ2xFLFFBQVEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBRWpFLE9BQU8sUUFBUTtJQUNqQixDQUFDO0lBRU8scUNBQWdCLEdBQXhCLFVBQXlCLFNBQWlCLEVBQUUsS0FBYTtRQUN2RCxPQUFPLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTO0lBQ3RGLENBQUM7SUFFTyxxQ0FBZ0IsR0FBeEIsVUFBeUIsU0FBaUIsRUFBRSxLQUFhO1FBQ3ZELElBQUksU0FBUyxLQUFLLENBQUMsQ0FBQyxFQUFFO1lBQ3BCLHdGQUF3RjtZQUN4RixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO1NBQ3pCO1FBQ0QsMkRBQTJEO1FBQzNELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDekIsQ0FBQztJQUVPLGlDQUFZLEdBQXBCLFVBQXFCLEdBQVcsRUFBRSxHQUFXLEVBQUUsUUFBZ0I7UUFDN0QsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQztJQUMvQyxDQUFDO0lBRU8sd0NBQW1CLEdBQTNCLFVBQ0UsQ0FBOEMsRUFDOUMsQ0FBOEM7UUFFOUMseUJBQXlCO1FBQ3pCLElBQU0sS0FBSyxHQUFHLG1FQUFtRTtRQUNqRixXQUFXO1FBQ1gsSUFBTSxNQUFNLEdBQUc7WUFDYixDQUFDLEVBQUU7Z0JBQ0QsS0FBSyxFQUFFLENBQUM7Z0JBQ1IsSUFBSSxFQUFFLElBQUk7YUFDWDtZQUNELENBQUMsRUFBRTtnQkFDRCxLQUFLLEVBQUUsQ0FBQztnQkFDUixJQUFJLEVBQUUsSUFBSTthQUNYO1NBQ0Y7UUFFRCxJQUFJLE9BQU8sQ0FBQyxLQUFLLFFBQVEsRUFBRTtZQUN6QixNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDO1NBQ25CO2FBQU07WUFDTCxJQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUM3QixJQUFJLE9BQU8sS0FBSyxJQUFJLEVBQUU7Z0JBQ3BCLE1BQU0sQ0FBQyxDQUFDLEdBQUc7b0JBQ1QsS0FBSyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3pCLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO2lCQUNqQjthQUNGO1NBQ0Y7UUFFRCxJQUFJLE9BQU8sQ0FBQyxLQUFLLFFBQVEsRUFBRTtZQUN6QixNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDO1NBQ25CO2FBQU07WUFDTCxJQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUM3QixJQUFJLE9BQU8sS0FBSyxJQUFJLEVBQUU7Z0JBQ3BCLE1BQU0sQ0FBQyxDQUFDLEdBQUc7b0JBQ1QsS0FBSyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3pCLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO2lCQUNqQjthQUNGO1NBQ0Y7UUFFRCxPQUFPLE1BQU07SUFDZixDQUFDO0lBRU8sbUNBQWMsR0FBdEIsVUFBdUIsR0FBZ0IsRUFBRSxXQUF1QjtRQUM5RCw4Q0FBOEM7UUFDOUMsSUFBSSxXQUFXLENBQUMsSUFBSSxLQUFLLElBQUksRUFBRTtZQUM3QixPQUFPLENBQ0wsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxXQUFXLElBQUksQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO2dCQUNoRixXQUFXLENBQUMsS0FBSyxDQUNsQjtTQUNGO2FBQU0sSUFBSSxXQUFXLENBQUMsSUFBSSxLQUFLLEdBQUcsRUFBRTtZQUNuQyxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksR0FBRyxHQUFHLENBQUMsR0FBRyxXQUFXLENBQUMsS0FBSztTQUNwRDthQUFNO1lBQ0wsT0FBTyxXQUFXLENBQUMsS0FBSztTQUN6QjtJQUNILENBQUM7SUFFTyxtQ0FBYyxHQUF0QixVQUF1QixHQUFnQixFQUFFLFdBQXVCO1FBQzlELDhDQUE4QztRQUM5QyxJQUFJLFdBQVcsQ0FBQyxJQUFJLEtBQUssSUFBSSxFQUFFO1lBQzdCLE9BQU8sQ0FDTCxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLFVBQVUsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7Z0JBQzlFLFdBQVcsQ0FBQyxLQUFLLENBQ2xCO1NBQ0Y7YUFBTSxJQUFJLFdBQVcsQ0FBQyxJQUFJLEtBQUssR0FBRyxFQUFFO1lBQ25DLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxHQUFHLEdBQUcsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxLQUFLO1NBQ25EO2FBQU07WUFDTCxPQUFPLFdBQVcsQ0FBQyxLQUFLO1NBQ3pCO0lBQ0gsQ0FBQztJQUVPLDJCQUFNLEdBQWQsVUFBZSxNQUFjO1FBQzNCLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsV0FBVyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLFdBQVcsS0FBSyxDQUFDLENBQUM7SUFDakcsQ0FBQztJQUVPLGlDQUFZLEdBQXBCLFVBQXFCLEdBQWdCLEVBQUUsR0FBVyxFQUFFLFFBQWdDO1FBQXBGLGlCQXFEQztRQXBEQyxJQUFNLFFBQVEsR0FBRyxVQUFDLEtBQWEsRUFBRSxHQUFXLEVBQUUsT0FBZSxFQUFFLFFBQWdCO1lBQzdFLElBQUksT0FBTyxHQUFHLFFBQVEsRUFBRTtnQkFDdEIsT0FBTyxHQUFHO2FBQ1g7WUFFRCxPQUFPLEtBQUssR0FBRyxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsR0FBRyxLQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUM7UUFDaEUsQ0FBQztRQUVELElBQU0sS0FBSyxHQUFHO1lBQ1osQ0FBQyxFQUFFLEdBQUcsQ0FBQyxTQUFTO1lBQ2hCLENBQUMsRUFBRSxHQUFHLENBQUMsVUFBVTtTQUNsQjtRQUVELG9DQUFvQztRQUNwQyxJQUFNLHFCQUFxQixHQUN6QixNQUFNLENBQUMscUJBQXFCO1lBQzVCLE1BQU0sQ0FBQywyQkFBMkI7WUFDbEMsVUFBVSxFQUFFO2dCQUNWLE9BQU8sTUFBTSxDQUFDLFVBQVUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDO1lBQ2xDLENBQUM7UUFDSCxJQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRO1FBQ3ZELElBQUksU0FBaUI7UUFFckIsOEJBQThCO1FBQzlCLFNBQVMsSUFBSSxDQUFDLFNBQWlCO1lBQzdCLElBQUksQ0FBQyxTQUFTLEVBQUU7Z0JBQ2QsU0FBUyxHQUFHLFNBQVM7YUFDdEI7WUFDRCxJQUFNLE9BQU8sR0FBRyxTQUFTLEdBQUcsU0FBUztZQUVyQyxtREFBbUQ7WUFDbkQsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ2pCLEdBQUcsQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsUUFBUSxDQUFDO2FBQzVEO1lBRUQsbURBQW1EO1lBQ25ELElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUNqQixHQUFHLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLFFBQVEsQ0FBQzthQUM3RDtZQUVELDRCQUE0QjtZQUM1QixJQUFJLE9BQU8sR0FBRyxRQUFRLEVBQUU7Z0JBQ3RCLHFCQUFxQixDQUFDLElBQUksQ0FBQzthQUM1QjtpQkFBTTtnQkFDTCx1QkFBdUI7Z0JBQ3ZCLElBQUksT0FBTyxRQUFRLEtBQUssVUFBVSxFQUFFO29CQUNsQyxzQ0FBc0M7b0JBQ3RDLE9BQU8sUUFBUSxDQUFDLEdBQUcsQ0FBQztpQkFDckI7YUFDRjtRQUNILENBQUM7UUFDRCxJQUFJLENBQUMsY0FBYyxHQUFHLHFCQUFxQixDQUFDLElBQUksQ0FBQztJQUNuRCxDQUFDO0lBRUQseUJBQUksR0FBSixVQUFLLFFBQXFCO1FBQ3hCLElBQUksQ0FBQyxjQUFjLEdBQUcsT0FBTyxRQUFRLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUk7UUFDdEUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQzlCLE9BQU8sSUFBSTtJQUNiLENBQUM7SUFFRCwyQkFBTSxHQUFOO1FBQ0UsSUFBSSxDQUFDLGFBQWEsRUFBRTtRQUNwQixPQUFPLElBQUk7SUFDYixDQUFDO0lBQ0gsaUJBQUM7QUFBRCxDQUFDIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBlYXNlSW5PdXRRdWFkKHQ6IG51bWJlcikge1xuICByZXR1cm4gdCA8IDAuNSA/IDIgKiB0ICogdCA6IC0xICsgKDQgLSAyICogdCkgKiB0XG59XG5cbmNvbnN0IFRJTUVPVVRfTUlOID0gNTBcbmNvbnN0IFRJTUVPVVRfREVGQVVMVCA9IDEwMFxuY29uc3QgRFVSQVRJT05fREVGQVVMVCA9IDMwMFxuY29uc3QgVEhSRVNIT0xEX0RFRkFVTFQgPSAwLjJcbmNvbnN0IFNOQVBTVE9QX0RFRkFVTFQgPSBmYWxzZVxuY29uc3QgRUFTSU5HX0RFRkFVTFQgPSBlYXNlSW5PdXRRdWFkXG5jb25zdCBOT09QID0gKCkgPT4ge31cblxuaW50ZXJmYWNlIFNjcm9sbFNuYXBDb25maWd1cmF0aW9uIHtcbiAgLyoqXG4gICAqIHNuYXAtZGVzdGluYXRpb24gZm9yIHggYW5kIHkgYXhlc1xuICAgKiBzaG91bGQgYmUgYSB2YWxpZCBjc3MgdmFsdWUgZXhwcmVzc2VkIGFzIHB4fCV8dnd8dmhcbiAgICovXG4gIHNuYXBEZXN0aW5hdGlvblg/OiBzdHJpbmcgfCBudW1iZXJcbiAgc25hcERlc3RpbmF0aW9uWT86IHN0cmluZyB8IG51bWJlclxuICAvKipcbiAgICogdGltZSBpbiBtcyBhZnRlciB3aGljaCBzY3JvbGxpbmcgaXMgY29uc2lkZXJlZCBmaW5pc2hlZFxuICAgKi9cbiAgdGltZW91dD86IG51bWJlclxuICAvKipcbiAgICogZHVyYXRpb24gaW4gbXMgZm9yIHRoZSBzbW9vdGggc25hcFxuICAgKi9cbiAgZHVyYXRpb24/OiBudW1iZXJcbiAgLyoqXG4gICAqIHRocmVzaG9sZCB0byByZWFjaCBiZWZvcmUgc2Nyb2xsaW5nIHRvIG5leHQvcHJldiBlbGVtZW50LCBleHByZXNzZWQgYXMgYSBwZXJjZW50YWdlIGluIHRoZSByYW5nZSBbMCwgMV1cbiAgICovXG4gIHRocmVzaG9sZD86IG51bWJlclxuICAvKipcbiAgICogd2hlbiB0cnVlLCB0aGUgc2Nyb2xsIGNvbnRhaW5lciBpcyBub3QgYWxsb3dlZCB0byBcInBhc3Mgb3ZlclwiIHRoZSBvdGhlciBzbmFwIHBvc2l0aW9uc1xuICAgKi9cbiAgc25hcFN0b3A/OiBib29sZWFuXG4gIC8qKlxuICAgKiBjdXN0b20gZWFzaW5nIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB0IG5vcm1hbGl6ZWQgdGltZSB0eXBpY2FsbHkgaW4gdGhlIHJhbmdlIFswLCAxXVxuICAgKi9cbiAgZWFzaW5nPzogKHQ6IG51bWJlcikgPT4gbnVtYmVyXG59XG5cbmludGVyZmFjZSBTbmFwTGVuZ3RoIHtcbiAgdmFsdWU6IG51bWJlclxuICB1bml0OiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFNuYXBDb29yZCB7XG4gIHk6IFNuYXBMZW5ndGhcbiAgeDogU25hcExlbmd0aFxufVxuXG5pbnRlcmZhY2UgQ29vcmRzIHtcbiAgeT86IG51bWJlclxuICB4PzogbnVtYmVyXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjcm9sbFNuYXAge1xuICBzbmFwRGVzdGluYXRpb25YOiBTY3JvbGxTbmFwQ29uZmlndXJhdGlvblsnc25hcERlc3RpbmF0aW9uWCddXG4gIHNuYXBEZXN0aW5hdGlvblk6IFNjcm9sbFNuYXBDb25maWd1cmF0aW9uWydzbmFwRGVzdGluYXRpb25ZJ11cbiAgdGltZW91dDogU2Nyb2xsU25hcENvbmZpZ3VyYXRpb25bJ3RpbWVvdXQnXVxuICBkdXJhdGlvbjogU2Nyb2xsU25hcENvbmZpZ3VyYXRpb25bJ2R1cmF0aW9uJ11cbiAgdGhyZXNob2xkOiBTY3JvbGxTbmFwQ29uZmlndXJhdGlvblsndGhyZXNob2xkJ11cbiAgc25hcFN0b3A6IFNjcm9sbFNuYXBDb25maWd1cmF0aW9uWydzbmFwU3RvcCddXG4gIGVhc2luZzogU2Nyb2xsU25hcENvbmZpZ3VyYXRpb25bJ2Vhc2luZyddXG5cbiAgZWxlbWVudDogSFRNTEVsZW1lbnRcbiAgbGlzdGVuZXJFbGVtZW50OiBIVE1MRWxlbWVudCB8IFdpbmRvd1xuICB0YXJnZXQ6IEhUTUxFbGVtZW50XG4gIGFuaW1hdGluZyA9IGZhbHNlXG5cbiAgcHJpdmF0ZSBvbkFuaW1hdGlvbkVuZDogKCkgPT4gdm9pZFxuICBwcml2YXRlIHNjcm9sbEhhbmRsZXJUaW1lcjogbnVtYmVyXG4gIHByaXZhdGUgc2Nyb2xsU3BlZWRUaW1lcjogbnVtYmVyXG4gIHByaXZhdGUgc2Nyb2xsU3RhcnQ6IENvb3Jkc1xuICBwcml2YXRlIHNwZWVkRGVsdGFYOiBudW1iZXJcbiAgcHJpdmF0ZSBzcGVlZERlbHRhWTogbnVtYmVyXG4gIHByaXZhdGUgc25hcExlbmd0aFVuaXQ6IFNuYXBDb29yZFxuICBwcml2YXRlIGxhc3RTY3JvbGxWYWx1ZTogQ29vcmRzID0ge1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgfVxuICBwcml2YXRlIGFuaW1hdGlvbkZyYW1lOiBudW1iZXJcblxuICBjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRWxlbWVudCwgY29uZmlnOiBTY3JvbGxTbmFwQ29uZmlndXJhdGlvbikge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnRcbiAgICBjb25zdCB7XG4gICAgICBzbmFwRGVzdGluYXRpb25YLFxuICAgICAgc25hcERlc3RpbmF0aW9uWSxcbiAgICAgIHRpbWVvdXQsXG4gICAgICBkdXJhdGlvbixcbiAgICAgIHRocmVzaG9sZCxcbiAgICAgIHNuYXBTdG9wLFxuICAgICAgZWFzaW5nLFxuICAgIH0gPSBjb25maWdcblxuICAgIGlmIChcbiAgICAgIHNuYXBEZXN0aW5hdGlvblggJiZcbiAgICAgIHR5cGVvZiBzbmFwRGVzdGluYXRpb25YICE9PSAnc3RyaW5nJyAmJlxuICAgICAgdHlwZW9mIHNuYXBEZXN0aW5hdGlvblggIT09ICdudW1iZXInXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDb25maWcgcHJvcGVydHkgJ3NuYXBEZXN0aW5hdGlvblgnIGlzIG5vdCB2YWxpZCwgZXhwZWN0ZWQgU1RSSU5HIG9yIE5VTUJFUiBidXQgZm91bmQgJHsodHlwZW9mIHNuYXBEZXN0aW5hdGlvblgpLnRvVXBwZXJDYXNlKCl9YFxuICAgICAgKVxuICAgIH1cbiAgICB0aGlzLnNuYXBEZXN0aW5hdGlvblggPSBzbmFwRGVzdGluYXRpb25YXG5cbiAgICBpZiAoXG4gICAgICBzbmFwRGVzdGluYXRpb25ZICYmXG4gICAgICB0eXBlb2Ygc25hcERlc3RpbmF0aW9uWSAhPT0gJ3N0cmluZycgJiZcbiAgICAgIHR5cGVvZiBzbmFwRGVzdGluYXRpb25ZICE9PSAnbnVtYmVyJ1xuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ29uZmlnIHByb3BlcnR5ICdzbmFwRGVzdGluYXRpb25ZJyBpcyBub3QgdmFsaWQsIGV4cGVjdGVkIFNUUklORyBvciBOVU1CRVIgYnV0IGZvdW5kICR7KHR5cGVvZiBzbmFwRGVzdGluYXRpb25ZKS50b1VwcGVyQ2FzZSgpfWBcbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5zbmFwRGVzdGluYXRpb25ZID0gc25hcERlc3RpbmF0aW9uWVxuXG4gICAgaWYgKHRpbWVvdXQgJiYgKGlzTmFOKHRpbWVvdXQpIHx8IHR5cGVvZiB0aW1lb3V0ID09PSAnYm9vbGVhbicpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBPcHRpb25hbCBjb25maWcgcHJvcGVydHkgJ3RpbWVvdXQnIGlzIG5vdCB2YWxpZCwgZXhwZWN0ZWQgTlVNQkVSIGJ1dCBmb3VuZCAkeyh0eXBlb2YgdGltZW91dCkudG9VcHBlckNhc2UoKX1gXG4gICAgICApXG4gICAgfVxuICAgIC8vIGFueSB2YWx1ZSBsZXNzIHRoZW4gVElNRU9VVF9NSU4gbWF5IGNhdXNlIHdlaXJkIGJhaGF2aW91ciBvbiBzb21lIGRldmljZXMgKGVzcGVjaWFsbHkgb24gbW9iaWxlIHdpdGggbW9tZW50dW0gc2Nyb2xsaW5nKVxuICAgIHRoaXMudGltZW91dCA9IHRpbWVvdXQgJiYgdGltZW91dCA+PSBUSU1FT1VUX01JTiA/IHRpbWVvdXQgOiBUSU1FT1VUX0RFRkFVTFRcblxuICAgIGlmIChkdXJhdGlvbiAmJiAoaXNOYU4oZHVyYXRpb24pIHx8IHR5cGVvZiBkdXJhdGlvbiA9PT0gJ2Jvb2xlYW4nKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgT3B0aW9uYWwgY29uZmlnIHByb3BlcnR5ICdkdXJhdGlvbicgaXMgbm90IHZhbGlkLCBleHBlY3RlZCBOVU1CRVIgYnV0IGZvdW5kICR7KHR5cGVvZiBkdXJhdGlvbikudG9VcHBlckNhc2UoKX1gXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMuZHVyYXRpb24gPSBkdXJhdGlvbiB8fCBEVVJBVElPTl9ERUZBVUxUXG5cbiAgICBpZiAodGhyZXNob2xkICYmIChpc05hTih0aHJlc2hvbGQpIHx8IHR5cGVvZiB0aHJlc2hvbGQgPT09ICdib29sZWFuJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYE9wdGlvbmFsIGNvbmZpZyBwcm9wZXJ0eSAndGhyZXNob2xkJyBpcyBub3QgdmFsaWQsIGV4cGVjdGVkIE5VTUJFUiBidXQgZm91bmQgJHsodHlwZW9mIHRocmVzaG9sZCkudG9VcHBlckNhc2UoKX1gXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMudGhyZXNob2xkID0gdGhyZXNob2xkIHx8IFRIUkVTSE9MRF9ERUZBVUxUXG5cbiAgICBpZiAoZWFzaW5nICYmIHR5cGVvZiBlYXNpbmcgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYE9wdGlvbmFsIGNvbmZpZyBwcm9wZXJ0eSAnZWFzaW5nJyBpcyBub3QgdmFsaWQsIGV4cGVjdGVkIEZVTkNUSU9OIGJ1dCBmb3VuZCAkeyh0eXBlb2YgZWFzaW5nKS50b1VwcGVyQ2FzZSgpfWBcbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5lYXNpbmcgPSBlYXNpbmcgfHwgRUFTSU5HX0RFRkFVTFRcblxuICAgIGlmIChzbmFwU3RvcCAmJiB0eXBlb2Ygc25hcFN0b3AgIT09ICdib29sZWFuJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgT3B0aW9uYWwgY29uZmlnIHByb3BlcnR5ICdzbmFwU3RvcCcgaXMgbm90IHZhbGlkLCBleHBlY3RlZCBCT09MRUFOIGJ1dCBmb3VuZCAkeyh0eXBlb2Ygc25hcFN0b3ApLnRvVXBwZXJDYXNlKCl9YFxuICAgICAgKVxuICAgIH1cbiAgICB0aGlzLnNuYXBTdG9wID0gc25hcFN0b3AgfHwgU05BUFNUT1BfREVGQVVMVFxuICB9XG5cbiAgcHJpdmF0ZSBjaGVja1Njcm9sbFNwZWVkKHZhbHVlOiBudW1iZXIsIGF4aXM6ICd4JyB8ICd5Jykge1xuICAgIGNvbnN0IGNsZWFyID0gKCkgPT4ge1xuICAgICAgdGhpcy5sYXN0U2Nyb2xsVmFsdWVbYXhpc10gPSBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgbmV3VmFsdWUgPSB2YWx1ZVxuICAgIGxldCBkZWx0YVxuXG4gICAgaWYgKHRoaXMubGFzdFNjcm9sbFZhbHVlW2F4aXNdICE9PSBudWxsKSB7XG4gICAgICBkZWx0YSA9IG5ld1ZhbHVlIC0gdGhpcy5sYXN0U2Nyb2xsVmFsdWVbYXhpc11cbiAgICB9IGVsc2Uge1xuICAgICAgZGVsdGEgPSAwXG4gICAgfVxuXG4gICAgdGhpcy5sYXN0U2Nyb2xsVmFsdWVbYXhpc10gPSBuZXdWYWx1ZVxuICAgIHRoaXMuc2Nyb2xsU3BlZWRUaW1lciAmJiBjbGVhclRpbWVvdXQodGhpcy5zY3JvbGxTcGVlZFRpbWVyKVxuICAgIHRoaXMuc2Nyb2xsU3BlZWRUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KGNsZWFyLCAxMDApXG5cbiAgICByZXR1cm4gZGVsdGFcbiAgfVxuXG4gIHByaXZhdGUgc2F2ZURlY2xhcmF0aW9uKG9iajogSFRNTEVsZW1lbnQpIHtcbiAgICB0aGlzLnNuYXBMZW5ndGhVbml0ID0gdGhpcy5wYXJzZVNuYXBDb29yZFZhbHVlKHRoaXMuc25hcERlc3RpbmF0aW9uWCwgdGhpcy5zbmFwRGVzdGluYXRpb25ZKVxuICB9XG5cbiAgcHJpdmF0ZSBiaW5kRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgIHRoaXMudGFyZ2V0ID0gZWxlbWVudFxuICAgIHRoaXMubGlzdGVuZXJFbGVtZW50ID0gZWxlbWVudCA9PT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ID8gd2luZG93IDogZWxlbWVudFxuXG4gICAgdGhpcy5saXN0ZW5lckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zdGFydEFuaW1hdGlvbiwgZmFsc2UpXG4gICAgdGhpcy5zYXZlRGVjbGFyYXRpb24odGhpcy50YXJnZXQpXG4gIH1cblxuICBwcml2YXRlIHVuYmluZEVsZW1lbnQoKSB7XG4gICAgdGhpcy5saXN0ZW5lckVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zdGFydEFuaW1hdGlvbiwgZmFsc2UpXG4gIH1cblxuICBwcml2YXRlIHN0YXJ0QW5pbWF0aW9uID0gKCkgPT4ge1xuICAgIHRoaXMuc3BlZWREZWx0YVggPSB0aGlzLmNoZWNrU2Nyb2xsU3BlZWQodGhpcy50YXJnZXQuc2Nyb2xsTGVmdCwgJ3gnKVxuICAgIHRoaXMuc3BlZWREZWx0YVkgPSB0aGlzLmNoZWNrU2Nyb2xsU3BlZWQodGhpcy50YXJnZXQuc2Nyb2xsVG9wLCAneScpXG5cbiAgICBpZiAodGhpcy5hbmltYXRpbmcgfHwgKHRoaXMuc3BlZWREZWx0YVggPT09IDAgJiYgdGhpcy5zcGVlZERlbHRhWSA9PT0gMCkpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuaGFuZGxlcih0aGlzLnRhcmdldClcbiAgfVxuXG4gIC8qKlxuICAgKiBzY3JvbGwgaGFuZGxlclxuICAgKiB0aGlzIGlzIHRoZSBjYWxsYmFjayBmb3Igc2Nyb2xsIGV2ZW50cy5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlcih0YXJnZXQ6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gaWYgY3VycmVudGx5IGFuaW1hdGluZywgc3RvcCBpdC4gdGhpcyBwcmV2ZW50cyBmbGlja2VyaW5nLlxuICAgIGlmICh0aGlzLmFuaW1hdGlvbkZyYW1lKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5hbmltYXRpb25GcmFtZSlcbiAgICB9XG5cbiAgICAvLyBpZiBhIHByZXZpb3VzIHRpbWVvdXQgZXhpc3RzLCBjbGVhciBpdC5cbiAgICBpZiAodGhpcy5zY3JvbGxIYW5kbGVyVGltZXIpIHtcbiAgICAgIC8vIHdlIG9ubHkgd2FudCB0byBjYWxsIGEgdGltZW91dCBvbmNlIGFmdGVyIHNjcm9sbGluZy4uXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5zY3JvbGxIYW5kbGVyVGltZXIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2Nyb2xsU3RhcnQgPSB7XG4gICAgICAgIHk6IHRhcmdldC5zY3JvbGxUb3AsXG4gICAgICAgIHg6IHRhcmdldC5zY3JvbGxMZWZ0LFxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuc2Nyb2xsSGFuZGxlclRpbWVyID0gd2luZG93LnNldFRpbWVvdXQodGhpcy5hbmltYXRpb25IYW5kbGVyLCB0aGlzLnRpbWVvdXQpXG4gIH1cblxuICBwcml2YXRlIGFuaW1hdGlvbkhhbmRsZXIgPSAoKSA9PiB7XG4gICAgLy8gaWYgd2UgZG9uJ3QgbW92ZSBhIHRoaW5nLCB3ZSBjYW4gaWdub3JlIHRoZSB0aW1lb3V0OiBpZiB3ZSBkaWQsIHRoZXJlJ2QgYmUgYW5vdGhlciB0aW1lb3V0IGFkZGVkIGZvciB0aGlzLnNjcm9sbFN0YXJ0KzEuXG4gICAgaWYgKFxuICAgICAgdGhpcy5zY3JvbGxTdGFydC55ID09PSB0aGlzLnRhcmdldC5zY3JvbGxUb3AgJiZcbiAgICAgIHRoaXMuc2Nyb2xsU3RhcnQueCA9PT0gdGhpcy50YXJnZXQuc2Nyb2xsTGVmdFxuICAgICkge1xuICAgICAgLy8gaWdub3JlIHRpbWVvdXRcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGRldGVjdCBkaXJlY3Rpb24gb2Ygc2Nyb2xsLiBuZWdhdGl2ZSBpcyB1cCwgcG9zaXRpdmUgaXMgZG93bi5cbiAgICBjb25zdCBkaXJlY3Rpb24gPSB7XG4gICAgICB5OiBNYXRoLnNpZ24odGhpcy5zcGVlZERlbHRhWSksXG4gICAgICB4OiBNYXRoLnNpZ24odGhpcy5zcGVlZERlbHRhWCksXG4gICAgfVxuXG4gICAgLy8gZ2V0IHRoZSBuZXh0IHNuYXAtcG9pbnQgdG8gc25hcC10b1xuICAgIGNvbnN0IHNuYXBQb2ludCA9IHRoaXMuZ2V0TmV4dFNuYXBQb2ludCh0aGlzLnRhcmdldCwgZGlyZWN0aW9uKVxuXG4gICAgdGhpcy5saXN0ZW5lckVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zdGFydEFuaW1hdGlvbiwgZmFsc2UpXG5cbiAgICB0aGlzLmFuaW1hdGluZyA9IHRydWVcblxuICAgIC8vIHNtb290aGx5IG1vdmUgdG8gdGhlIHNuYXAgcG9pbnRcbiAgICB0aGlzLnNtb290aFNjcm9sbCh0aGlzLnRhcmdldCwgc25hcFBvaW50LCAoKSA9PiB7XG4gICAgICAvLyBhZnRlciBtb3ZpbmcgdG8gdGhlIHNuYXAgcG9pbnQsIHJlYmluZCB0aGUgc2Nyb2xsIGV2ZW50IGhhbmRsZXJcbiAgICAgIHRoaXMuYW5pbWF0aW5nID0gZmFsc2VcbiAgICAgIHRoaXMubGlzdGVuZXJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc3RhcnRBbmltYXRpb24sIGZhbHNlKVxuICAgICAgdGhpcy5vbkFuaW1hdGlvbkVuZCgpXG5cbiAgICAgIC8vIHJlc2V0IHNjcm9sbFN0YXJ0XG4gICAgICB0aGlzLnNjcm9sbFN0YXJ0ID0ge1xuICAgICAgICB5OiB0aGlzLnRhcmdldC5zY3JvbGxUb3AsXG4gICAgICAgIHg6IHRoaXMudGFyZ2V0LnNjcm9sbExlZnQsXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgZ2V0TmV4dFNuYXBQb2ludCh0YXJnZXQ6IEhUTUxFbGVtZW50LCBkaXJlY3Rpb246IENvb3Jkcykge1xuICAgIC8vIGdldCBzbmFwIGxlbmd0aFxuICAgIGNvbnN0IHNuYXBMZW5ndGggPSB7XG4gICAgICB5OiBNYXRoLnJvdW5kKHRoaXMuZ2V0WVNuYXBMZW5ndGgodGhpcy50YXJnZXQsIHRoaXMuc25hcExlbmd0aFVuaXQueSkpLFxuICAgICAgeDogTWF0aC5yb3VuZCh0aGlzLmdldFhTbmFwTGVuZ3RoKHRoaXMudGFyZ2V0LCB0aGlzLnNuYXBMZW5ndGhVbml0LngpKSxcbiAgICB9XG4gICAgY29uc3QgdG9wID0gdGhpcy50YXJnZXQuc2Nyb2xsVG9wXG4gICAgY29uc3QgbGVmdCA9IHRoaXMudGFyZ2V0LnNjcm9sbExlZnRcblxuICAgIGNvbnN0IHN0YXJ0UG9pbnQgPSB7XG4gICAgICB5OiB0aGlzLnNjcm9sbFN0YXJ0LnkgLyBzbmFwTGVuZ3RoLnkgfHwgMCxcbiAgICAgIHg6IHRoaXMuc2Nyb2xsU3RhcnQueCAvIHNuYXBMZW5ndGgueCB8fCAwLFxuICAgIH1cbiAgICBjb25zdCBjdXJyZW50UG9pbnQgPSB7XG4gICAgICB5OiB0b3AgLyBzbmFwTGVuZ3RoLnkgfHwgMCxcbiAgICAgIHg6IGxlZnQgLyBzbmFwTGVuZ3RoLnggfHwgMCxcbiAgICB9XG4gICAgY29uc3QgbmV4dFBvaW50ID0ge1xuICAgICAgeTogMCxcbiAgICAgIHg6IDAsXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRhcmdldCBhbmQgYm91bmRzIGJ5IGRpcmVjdGlvbixcbiAgICAgKiBpZiB0aHJlc2hvbGQgaGFzIG5vdCBiZWVuIHJlYWNoZWQsIHNjcm9sbCBiYWNrIHRvIGN1cnJlbnRQb2ludFxuICAgICAqKi9cbiAgICBpZiAodGhpcy5pc0Fib3ZlVGhyZXNob2xkKGRpcmVjdGlvbi55LCBjdXJyZW50UG9pbnQueSkpIHtcbiAgICAgIGlmICh0aGlzLnNuYXBTdG9wKSB7XG4gICAgICAgIG5leHRQb2ludC55ID0gdGhpcy5yb3VuZEJ5RGlyZWN0aW9uKC1kaXJlY3Rpb24ueSwgc3RhcnRQb2ludC55ICsgZGlyZWN0aW9uLnkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0UG9pbnQueSA9IHRoaXMucm91bmRCeURpcmVjdGlvbihkaXJlY3Rpb24ueSwgY3VycmVudFBvaW50LnkpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG5leHRQb2ludC55ID0gdGhpcy5yb3VuZEJ5RGlyZWN0aW9uKGRpcmVjdGlvbi55ICogLTEsIGN1cnJlbnRQb2ludC55KVxuICAgIH1cblxuICAgIGlmICh0aGlzLmlzQWJvdmVUaHJlc2hvbGQoZGlyZWN0aW9uLngsIGN1cnJlbnRQb2ludC54KSkge1xuICAgICAgaWYgKHRoaXMuc25hcFN0b3ApIHtcbiAgICAgICAgbmV4dFBvaW50LnggPSB0aGlzLnJvdW5kQnlEaXJlY3Rpb24oLWRpcmVjdGlvbi54LCBzdGFydFBvaW50LnggKyBkaXJlY3Rpb24ueClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRQb2ludC54ID0gdGhpcy5yb3VuZEJ5RGlyZWN0aW9uKGRpcmVjdGlvbi54LCBjdXJyZW50UG9pbnQueClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dFBvaW50LnggPSB0aGlzLnJvdW5kQnlEaXJlY3Rpb24oZGlyZWN0aW9uLnggKiAtMSwgY3VycmVudFBvaW50LngpXG4gICAgfVxuXG4gICAgLy8gREVCVUdcbiAgICAvLyBjb25zb2xlLmxvZygnZGlyZWN0aW9uJywgZGlyZWN0aW9uKVxuICAgIC8vIGNvbnNvbGUubG9nKCdzdGFydFBvaW50Jywgc3RhcnRQb2ludClcbiAgICAvLyBjb25zb2xlLmxvZygnY3VycmVudFBvaW50JywgY3VycmVudFBvaW50KVxuICAgIC8vIGNvbnNvbGUubG9nKCduZXh0UG9pbnQnLCBuZXh0UG9pbnQpXG5cbiAgICAvLyBjYWxjdWxhdGUgd2hlcmUgdG8gc2Nyb2xsXG4gICAgY29uc3Qgc2Nyb2xsVG8gPSB7XG4gICAgICB5OiBuZXh0UG9pbnQueSAqIHNuYXBMZW5ndGgueSxcbiAgICAgIHg6IG5leHRQb2ludC54ICogc25hcExlbmd0aC54LFxuICAgIH1cblxuICAgIC8vIHN0YXkgaW4gYm91bmRzIChtaW5pbXVtOiAwLCBtYXhtaW11bTogYWJzb2x1dGUgaGVpZ2h0KVxuICAgIHNjcm9sbFRvLnkgPSB0aGlzLnN0YXlJbkJvdW5kcygwLCB0YXJnZXQuc2Nyb2xsSGVpZ2h0LCBzY3JvbGxUby55KVxuICAgIHNjcm9sbFRvLnggPSB0aGlzLnN0YXlJbkJvdW5kcygwLCB0YXJnZXQuc2Nyb2xsV2lkdGgsIHNjcm9sbFRvLngpXG5cbiAgICByZXR1cm4gc2Nyb2xsVG9cbiAgfVxuXG4gIHByaXZhdGUgaXNBYm92ZVRocmVzaG9sZChkaXJlY3Rpb246IG51bWJlciwgdmFsdWU6IG51bWJlcikge1xuICAgIHJldHVybiBkaXJlY3Rpb24gPiAwID8gdmFsdWUgJSAxID4gdGhpcy50aHJlc2hvbGQgOiAxIC0gKHZhbHVlICUgMSkgPiB0aGlzLnRocmVzaG9sZFxuICB9XG5cbiAgcHJpdmF0ZSByb3VuZEJ5RGlyZWN0aW9uKGRpcmVjdGlvbjogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKSB7XG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gLTEpIHtcbiAgICAgIC8vIHdoZW4gd2UgZ28gdXAsIHdlIGZsb29yIHRoZSBudW1iZXIgdG8ganVtcCB0byB0aGUgbmV4dCBzbmFwLXBvaW50IGluIHNjcm9sbCBkaXJlY3Rpb25cbiAgICAgIHJldHVybiBNYXRoLmZsb29yKHZhbHVlKVxuICAgIH1cbiAgICAvLyBnbyBkb3duLCB3ZSBjZWlsIHRoZSBudW1iZXIgdG8ganVtcCB0byB0aGUgbmV4dCBpbiB2aWV3LlxuICAgIHJldHVybiBNYXRoLmNlaWwodmFsdWUpXG4gIH1cblxuICBwcml2YXRlIHN0YXlJbkJvdW5kcyhtaW46IG51bWJlciwgbWF4OiBudW1iZXIsIGRlc3RpbmVkOiBudW1iZXIpIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4oZGVzdGluZWQsIG1heCksIG1pbilcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTbmFwQ29vcmRWYWx1ZShcbiAgICB4OiBTY3JvbGxTbmFwQ29uZmlndXJhdGlvblsnc25hcERlc3RpbmF0aW9uWCddLFxuICAgIHk6IFNjcm9sbFNuYXBDb25maWd1cmF0aW9uWydzbmFwRGVzdGluYXRpb25ZJ11cbiAgKSB7XG4gICAgLy8gcmVnZXggdG8gcGFyc2UgbGVuZ3Roc1xuICAgIGNvbnN0IHJlZ2V4ID0gLyhbKy1dPyg/PVxcLlxcZHxcXGQpKD86XFxkKyk/KD86XFwuP1xcZCopKD86W2VFXVsrLV0/XFxkKyk/KShweHwlfHZ3fHZoKS9cbiAgICAvLyBkZWZhdWx0c1xuICAgIGNvbnN0IHBhcnNlZCA9IHtcbiAgICAgIHk6IHtcbiAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgIHVuaXQ6ICdweCcsXG4gICAgICB9LFxuICAgICAgeDoge1xuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgdW5pdDogJ3B4JyxcbiAgICAgIH0sXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB5ID09PSAnbnVtYmVyJykge1xuICAgICAgcGFyc2VkLnkudmFsdWUgPSB5XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJlc3VsdFkgPSByZWdleC5leGVjKHkpXG4gICAgICBpZiAocmVzdWx0WSAhPT0gbnVsbCkge1xuICAgICAgICBwYXJzZWQueSA9IHtcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHJlc3VsdFlbMV0pLFxuICAgICAgICAgIHVuaXQ6IHJlc3VsdFlbMl0sXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICBwYXJzZWQueC52YWx1ZSA9IHhcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcmVzdWx0WCA9IHJlZ2V4LmV4ZWMoeClcbiAgICAgIGlmIChyZXN1bHRYICE9PSBudWxsKSB7XG4gICAgICAgIHBhcnNlZC54ID0ge1xuICAgICAgICAgIHZhbHVlOiBOdW1iZXIocmVzdWx0WFsxXSksXG4gICAgICAgICAgdW5pdDogcmVzdWx0WFsyXSxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwYXJzZWRcbiAgfVxuXG4gIHByaXZhdGUgZ2V0WVNuYXBMZW5ndGgob2JqOiBIVE1MRWxlbWVudCwgZGVjbGFyYXRpb246IFNuYXBMZW5ndGgpIHtcbiAgICAvLyBnZXQgeSBzbmFwIGxlbmd0aCBiYXNlZCBvbiBkZWNsYXJhdGlvbiB1bml0XG4gICAgaWYgKGRlY2xhcmF0aW9uLnVuaXQgPT09ICd2aCcpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIChNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMSkgLyAxMDApICpcbiAgICAgICAgZGVjbGFyYXRpb24udmFsdWVcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGRlY2xhcmF0aW9uLnVuaXQgPT09ICclJykge1xuICAgICAgcmV0dXJuIChvYmouY2xpZW50SGVpZ2h0IC8gMTAwKSAqIGRlY2xhcmF0aW9uLnZhbHVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkZWNsYXJhdGlvbi52YWx1ZVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0WFNuYXBMZW5ndGgob2JqOiBIVE1MRWxlbWVudCwgZGVjbGFyYXRpb246IFNuYXBMZW5ndGgpIHtcbiAgICAvLyBnZXQgeCBzbmFwIGxlbmd0aCBiYXNlZCBvbiBkZWNsYXJhdGlvbiB1bml0XG4gICAgaWYgKGRlY2xhcmF0aW9uLnVuaXQgPT09ICd2dycpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIChNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDEpIC8gMTAwKSAqXG4gICAgICAgIGRlY2xhcmF0aW9uLnZhbHVlXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChkZWNsYXJhdGlvbi51bml0ID09PSAnJScpIHtcbiAgICAgIHJldHVybiAob2JqLmNsaWVudFdpZHRoIC8gMTAwKSAqIGRlY2xhcmF0aW9uLnZhbHVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkZWNsYXJhdGlvbi52YWx1ZVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaXNFZGdlKGNvb3JkczogQ29vcmRzKSB7XG4gICAgcmV0dXJuIChjb29yZHMueCA9PT0gMCAmJiB0aGlzLnNwZWVkRGVsdGFZID09PSAwKSB8fCAoY29vcmRzLnkgPT09IDAgJiYgdGhpcy5zcGVlZERlbHRhWCA9PT0gMClcbiAgfVxuXG4gIHByaXZhdGUgc21vb3RoU2Nyb2xsKG9iajogSFRNTEVsZW1lbnQsIGVuZDogQ29vcmRzLCBjYWxsYmFjazogKC4uLmFyZ3M6IGFueSkgPT4gdm9pZCkge1xuICAgIGNvbnN0IHBvc2l0aW9uID0gKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBlbGFwc2VkOiBudW1iZXIsIGR1cmF0aW9uOiBudW1iZXIpID0+IHtcbiAgICAgIGlmIChlbGFwc2VkID4gZHVyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGVuZFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RhcnQgKyAoZW5kIC0gc3RhcnQpICogdGhpcy5lYXNpbmcoZWxhcHNlZCAvIGR1cmF0aW9uKVxuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0ID0ge1xuICAgICAgeTogb2JqLnNjcm9sbFRvcCxcbiAgICAgIHg6IG9iai5zY3JvbGxMZWZ0LFxuICAgIH1cblxuICAgIC8vIGdldCBhbmltYXRpb24gZnJhbWUgb3IgYSBmYWxsYmFja1xuICAgIGNvbnN0IHJlcXVlc3RBbmltYXRpb25GcmFtZSA9XG4gICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGZuLCAxNSlcbiAgICAgIH1cbiAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMuaXNFZGdlKHN0YXJ0KSA/IDAgOiB0aGlzLmR1cmF0aW9uXG4gICAgbGV0IHN0YXJ0VGltZTogbnVtYmVyXG5cbiAgICAvLyBzZXR1cCB0aGUgc3RlcHBpbmcgZnVuY3Rpb25cbiAgICBmdW5jdGlvbiBzdGVwKHRpbWVzdGFtcDogbnVtYmVyKSB7XG4gICAgICBpZiAoIXN0YXJ0VGltZSkge1xuICAgICAgICBzdGFydFRpbWUgPSB0aW1lc3RhbXBcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVsYXBzZWQgPSB0aW1lc3RhbXAgLSBzdGFydFRpbWVcblxuICAgICAgLy8gY2hhbmdlIHBvc2l0aW9uIG9uIHktYXhpcyBpZiByZXN1bHQgaXMgYSBudW1iZXIuXG4gICAgICBpZiAoIWlzTmFOKGVuZC55KSkge1xuICAgICAgICBvYmouc2Nyb2xsVG9wID0gcG9zaXRpb24oc3RhcnQueSwgZW5kLnksIGVsYXBzZWQsIGR1cmF0aW9uKVxuICAgICAgfVxuXG4gICAgICAvLyBjaGFuZ2UgcG9zaXRpb24gb24geC1heGlzIGlmIHJlc3VsdCBpcyBhIG51bWJlci5cbiAgICAgIGlmICghaXNOYU4oZW5kLngpKSB7XG4gICAgICAgIG9iai5zY3JvbGxMZWZ0ID0gcG9zaXRpb24oc3RhcnQueCwgZW5kLngsIGVsYXBzZWQsIGR1cmF0aW9uKVxuICAgICAgfVxuXG4gICAgICAvLyBjaGVjayBpZiB3ZSBhcmUgb3ZlciBkdWU7XG4gICAgICBpZiAoZWxhcHNlZCA8IGR1cmF0aW9uKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaXMgdGhlcmUgYSBjYWxsYmFjaz9cbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIC8vIHN0b3AgZXhlY3V0aW9uIGFuZCBydW4gdGhlIGNhbGxiYWNrXG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVuZClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApXG4gIH1cblxuICBiaW5kKGNhbGxiYWNrPzogKCkgPT4gdm9pZCkge1xuICAgIHRoaXMub25BbmltYXRpb25FbmQgPSB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicgPyBjYWxsYmFjayA6IE5PT1BcbiAgICB0aGlzLmJpbmRFbGVtZW50KHRoaXMuZWxlbWVudClcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgdW5iaW5kKCkge1xuICAgIHRoaXMudW5iaW5kRWxlbWVudCgpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")}])}));